{
  "id": "9250bedd-4c5f-4bec-992d-61ab0fef7e43",
  "title": "Cross-Browser Extension Architecture",
  "content": "This extension now supports both Firefox and Chrome/Chromium browsers through a cross-browser architecture:\n\nARCHITECTURE APPROACH:\n- Single codebase with browser-specific manifest files\n- Uses webextension-polyfill for API compatibility across browsers\n- Manifest V2 for maximum compatibility (both Firefox and Chrome still support it)\n- Separate packaging scripts for Firefox (.xpi) and Chrome (.zip)\n\nKEY FILES:\n- manifest.json - Firefox-specific manifest (includes browser_specific_settings.gecko)\n- manifest.chrome.json - Chrome-specific manifest (excludes Firefox-specific settings, adds multiple icon sizes)\n- scripts/package-firefox.cjs - Packages extension as .xpi from dist/ directory\n- scripts/package-chrome.cjs - Packages extension as .zip with Chrome manifest from dist-chrome/ directory\n\nBUILD PROCESS:\n1. npm run build:prod - Builds extension into dist/ with Firefox manifest\n2. npm run package:firefox - Creates firefox-extension-vX.X.X.xpi from dist/\n3. npm run package:chrome - Creates dist-chrome/ with Chrome manifest, then creates chrome-extension-vX.X.X.zip\n\nGITHUB ACTIONS:\n- .github/workflows/release.yml updated to build both packages on tag/release\n- Validates version extraction, file existence, and manifest correctness\n- Uploads both .xpi and .zip files to GitHub releases\n- Includes error handling with set -e and file existence checks\n\nMANIFEST DIFFERENCES:\nFirefox manifest includes:\n- browser_specific_settings.gecko.id (required for auto-updates)\n- browser_specific_settings.gecko.update_url\n- Single icon size (96px)\n\nChrome manifest excludes:\n- browser_specific_settings (Chrome ignores it anyway)\n- Multiple icon sizes (48, 96, 128px for different contexts)\n\nBoth use:\n- Manifest V2 with browser_action\n- Same permissions array\n- Same background scripts and content scripts (with webextension-polyfill)\n- Same web_accessible_resources\n\nCOMPATIBILITY NOTES:\n- webextension-polyfill converts Chrome's callback-based APIs to promises\n- Firefox Container isolation works in Firefox, degrades gracefully in Chrome\n- All core features work in both browsers\n- Chrome-based browsers don't support auto-updates for manually installed extensions",
  "metadata": {},
  "createdAt": "2025-11-23T23:23:46.655Z",
  "updatedAt": "2025-11-23T23:23:46.655Z",
  "category": "architecture"
}
