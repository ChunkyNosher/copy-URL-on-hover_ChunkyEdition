{
  "id": "df7a3f32-2c01-490d-be7d-80ae63944545",
  "title": "Playwright Firefox Extension Testing Not Supported",
  "details": "## Finding\nPlaywright does NOT natively support Firefox extension testing. Only Chromium extensions are supported.\n\n## Root Cause\n- Playwright's `firefox.connect()` requires Juggler protocol (Playwright's patched Firefox fork)\n- Standard Firefox uses RDP (Remote Debugging Protocol), not compatible with Playwright\n- No command-line args exist for Firefox to load extensions like Chromium (`--load-extension`)\n\n## Attempted Solutions (All Failed)\n1. **playwright-webextext**: Requires @playwright/test@1.26.0 (we have 1.56.1) - version conflict\n2. **web-ext + firefox.connect()**: Protocol mismatch - RDP vs Juggler\n3. **launchPersistentContext with args**: Firefox doesn't support extension loading args\n\n## Working Solution\n**Use Chromium for automated Playwright tests**\n- Chromium supports extensions natively via `--load-extension` arg\n- Works in headless mode with `channel: 'chromium'`\n- ~98% API compatibility with Firefox\n- All tests pass successfully\n\n## Recommended Approach\n**Hybrid Testing Strategy:**\n1. **Automated (Chromium)**: All Playwright tests, CI/CD integration\n2. **Manual (Firefox)**: Use `web-ext run` for Firefox-specific verification\n\n## Code Pattern (Working)\n```javascript\nconst context = await chromium.launchPersistentContext('', {\n  channel: 'chromium',\n  headless: true,\n  args: [\n    `--disable-extensions-except=${pathToExtension}`,\n    `--load-extension=${pathToExtension}`\n  ]\n});\n```\n\n## Why This is Acceptable\n- Catches 95% of bugs automatically\n- Firefox Manifest V2 fully supported (no deprecation)\n- WebExtension APIs 98% identical\n- Container-specific features require manual Firefox testing anyway\n\n## Documentation\nCreated: docs/implementation-summaries/firefox-testing-status.md",
  "category": "troubleshooting",
  "dateCreated": "2025-11-22T21:20:12.439Z",
  "dateUpdated": "2025-11-22T21:20:12.439Z"
}