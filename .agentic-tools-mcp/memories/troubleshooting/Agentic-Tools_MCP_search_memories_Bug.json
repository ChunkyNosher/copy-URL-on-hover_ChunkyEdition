{
  "id": "4bfccc83-71d9-43bc-a17a-cae68944717b",
  "title": "Agentic-Tools MCP search_memories Bug",
  "details": "**CRITICAL BUG FOUND**: agentic-tools MCP search_memories function is broken\n\n## Problem Statement\nUser reported nested .agentic-tools-mcp directory structure and requested verification that memory search works.\n\n## Investigation Results\n\n### ✅ Directory Structure - FIXED\n- Found nested `.agentic-tools-mcp/.agentic-tools-mcp/` directory\n- Moved 12 nested memories to root `.agentic-tools-mcp/memories/`\n- All 103 memories now in correct location\n- Files organized by category (17 categories total)\n\n### ✅ list_memories Function - WORKS PERFECTLY\n- Successfully lists all 103 memories\n- Properly shows titles, categories, dates\n- Category filtering works\n- Pagination works\n\n### ❌ search_memories Function - BROKEN\n**Error**: \"Cannot read properties of undefined (reading 'toLowerCase')\"\n\n**Root Cause Analysis:**\n1. Bug exists in agentic-tools MCP server implementation\n2. All memory files validated - JSON structure is correct\n3. Tried both old schema (details/dateCreated/dateUpdated) and new schema (content/createdAt/updatedAt)\n4. Bug persists regardless of schema format\n5. Even simple queries like \"test\" or \"sync\" fail\n6. Complex metadata with arrays/objects was suspected but not the cause\n\n**Testing Done:**\n- Validated all 103 JSON files have correct structure\n- Checked for null/undefined values - none found\n- Simplified complex metadata to primitive types - didn't fix it\n- Tested with original backup data - list works, search still broken\n\n### Workarounds\n\n**1. Use list_memories with category filter:**\n```javascript\nlist_memories({\n  workingDirectory: \"/path/to/repo\",\n  category: \"project-context\",  // or \"architecture\", \"technical\", etc.\n  limit: 100\n})\n```\n\n**2. Use grep on filesystem:**\n```bash\ngrep -r \"search term\" .agentic-tools-mcp/memories --include=\"*.json\" -l\n```\n\n**3. Use get_memory with specific IDs** from list_memories results\n\n### Memories Successfully Found (Manual Search)\n\n**Issue #47 Related (27 memories):**\n- Integration Tests Issue #47 Complete\n- Issue 47 Comprehensive Test Suite Complete\n- Test Bridge Architecture for Issue #47\n- Scenarios 1-20 documentation\n- Solo/Mute feature implementation\n- Manual testing procedures\n\n**Quick Tab Sync Related (10+ memories):**\n- Cross-tab synchronization patterns\n- BroadcastChannel implementation\n- Rapid position updates\n- Concurrent tab updates\n- State manager architecture\n\n## Conclusion\n\n**The agentic-tools MCP setup is now working**, but with a known limitation:\n- ✅ Directory structure fixed\n- ✅ Memories accessible via list_memories\n- ✅ Memories accessible via get_memory\n- ❌ search_memories has a bug in the MCP server (not our fault)\n\n**Recommendation**: Use list_memories with category filters as primary search method until agentic-tools MCP server search bug is fixed upstream.",
  "category": "troubleshooting",
  "dateCreated": "2025-11-24T19:44:22.851Z",
  "dateUpdated": "2025-11-24T19:44:22.851Z"
}