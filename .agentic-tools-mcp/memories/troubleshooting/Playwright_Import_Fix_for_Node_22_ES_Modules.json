{
  "id": "dd41c7f3-2386-4767-8be4-48a36941dba4",
  "title": "Playwright Import Fix for Node 22 ES Modules",
  "content": "## Issue\nPlaywright tests failed with: \"SyntaxError: The requested module '@playwright/test' does not provide an export named 'expect'\"\n\n## Root Cause\nNode.js 22's strict ESM mode doesn't support destructuring named exports from CommonJS modules. The import chain is:\n1. `@playwright/test/index.mjs` re-exports from `playwright/test`\n2. `playwright/test.mjs` imports from `playwright/test.js` (CommonJS)\n3. Destructuring `{ test, expect }` from the ESM wrapper breaks in Node 22\n\n## Solution\nChanged from:\n```javascript\nimport { test, expect } from '@playwright/test';\n```\n\nTo:\n```javascript\nimport playwright from 'playwright/test';\nconst { test, expect } = playwright;\n```\n\n## Implementation\nUpdated `tests/extension/fixtures.js` to use default import then destructure. Test files already imported from fixtures, so no changes needed there.\n\n##Additional Fixes\n- Added `channel: 'chromium'` to launchPersistentContext for headless extension support\n- Added `headless: true` to avoid display issues in CI environments\n- Installed Playwright browsers with system dependencies\n\n## Test Status After Fix\n- ✅ Import errors completely resolved\n- ✅ Tests are discovered and start running\n- ✅ No more module resolution errors\n- ⏳ Extension not loading in tests (separate issue - Manifest V2 compatibility with Chromium)\n\n## Files Modified\n- tests/extension/fixtures.js\n- tests/extension/quick-tabs-basic.spec.js (already correct)\n- tests/extension/issue-47-scenarios.spec.js (already correct)",
  "metadata": {},
  "createdAt": "2025-11-22T20:55:02.207Z",
  "updatedAt": "2025-11-22T20:55:02.207Z",
  "category": "troubleshooting"
}
